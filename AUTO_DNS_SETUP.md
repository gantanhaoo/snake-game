# 🚀 自动化 DNS 配置指南

## ⚠️ 重要说明

DNS 配置**无法完全自动化**，因为需要登录你的域名服务商账户。但本指南提供了**最简化的手动配置步骤**，只需 2-3 分钟即可完成。

---

## 📋 快速配置步骤（3步完成）

### 步骤 1：配置 DNS 记录（在域名服务商处）

#### 如果域名注册在 **Freenom**（.tk/.ml/.ga/.cf 域名）：

1. **访问**: https://www.freenom.com
2. **登录**你的账户
3. **进入** "我的域名" (My Domains)
4. **找到** `snakegame2024.tk`，点击 "管理域名" (Manage Domain)
5. **进入** "管理 Freenom DNS" (Manage Freenom DNS)
6. **添加 CNAME 记录**：
   - **名称**: `@` 或留空（表示根域名）
   - **类型**: `CNAME`
   - **目标**: `gantanhaoo.github.io`
   - **TTL**: `3600`
7. **保存**设置

#### 如果域名注册在其他服务商：

1. **登录**你的域名注册商管理后台
2. **找到** DNS 管理 / 域名解析 / DNS 设置
3. **添加 CNAME 记录**：
   - **主机记录/名称**: `@` 或留空（根域名）
   - **记录类型**: `CNAME`
   - **记录值/目标**: `gantanhaoo.github.io`
   - **TTL**: `3600`
4. **保存**设置

**⚠️ 注意**：如果 CNAME 不支持根域名（@），请使用 **A 记录**（4条记录）：
- 名称: `@`，类型: `A`，值: `185.199.108.153`
- 名称: `@`，类型: `A`，值: `185.199.109.153`
- 名称: `@`，类型: `A`，值: `185.199.110.153`
- 名称: `@`，类型: `A`，值: `185.199.111.153`

---

### 步骤 2：在 GitHub 中配置自定义域名

1. **访问**: https://github.com/gantanhaoo/snake-game/settings/pages
2. **在 "Custom domain" 输入框中输入**: `snakegame2024.tk`
3. **勾选** "Enforce HTTPS"
4. **点击** "Save"

---

### 步骤 3：验证配置

运行检查脚本：

```bash
node check-dns.js
```

或者手动检查：

```bash
nslookup snakegame2024.tk
```

**✅ 如果配置正确**，你应该看到指向 `gantanhaoo.github.io` 或 GitHub Pages IP 地址的结果。

---

## ⏱️ 生效时间

- **DNS 生效**: 通常 5 分钟到 2 小时
- **HTTPS 证书**: GitHub 自动配置，通常 10 分钟到几小时
- **最长等待**: 可能需要 24-48 小时（全球 DNS 传播）

---

## 🔍 辅助工具

### 查看详细配置步骤

```bash
node setup-dns-auto.js
```

这将显示详细的配置说明和所有配置选项。

### 检查 DNS 配置

```bash
node check-dns.js
```

这将检查 DNS 是否已正确配置并指向 GitHub Pages。

---

## ✅ 验证成功

配置成功后，访问以下链接应该能看到游戏：

```
https://snakegame2024.tk
```

---

## 🆘 遇到问题？

### 问题 1：DNS 查询失败

**原因**: DNS 记录尚未配置或还未生效

**解决**:
1. 确认已在域名服务商处添加 DNS 记录
2. 等待 5-30 分钟后重试
3. 使用其他 DNS 服务器（如 8.8.8.8）查询

### 问题 2：显示 404 错误

**原因**: GitHub Pages 中未配置自定义域名

**解决**:
1. 确认已在 GitHub Pages 设置中添加自定义域名
2. 确认 CNAME 文件已提交到仓库
3. 等待 GitHub 处理（通常几分钟）

### 问题 3：HTTPS 证书错误

**原因**: GitHub 的 SSL 证书尚未配置完成

**解决**:
1. 等待 10 分钟到几小时
2. 在 GitHub Pages 设置中检查证书状态
3. 确保已勾选 "Enforce HTTPS"

---

## 📝 配置记录参考

| 配置项 | 值 |
|--------|-----|
| 域名 | `snakegame2024.tk` |
| CNAME 目标 | `gantanhaoo.github.io` |
| A 记录 IP | `185.199.108.153`, `185.199.109.153`, `185.199.110.153`, `185.199.111.153` |
| TTL | `3600` |

---

## 🎯 下一步

配置完成后：
1. ✅ 等待 DNS 生效（5 分钟到 2 小时）
2. ✅ 访问 https://snakegame2024.tk 测试
3. ✅ 在微信中打开链接，测试是否可访问

**完成！** 🎉

